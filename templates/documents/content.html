{% extends 'base.html' %}
{% load static %}

{% block title %}Contenu - {{ document.title }} - DocMind{% endblock %}

{% block content %}
<div class="container" style="max-width:1100px;">
    <div class="d-flex justify-content-between align-items-center mb-3" style="padding-top:1.2em; padding-bottom:0.7em; border-bottom:1px solid #ececec;">
        <div class="d-flex align-items-center" style="gap:0.7em;">
            <span style="font-size:2em; color:#222; line-height:1;">
                <i class="bi bi-file-text"></i>
            </span>
            <span style="font-size:1.35em; font-weight:600; color:#222; font-family:'Segoe UI',Arial,sans-serif;">Contenu du document</span>
        </div>
        <a href="{% url 'documents:detail' document.pk %}" class="btn btn-outline-secondary btn-sm" style="font-weight:500; min-width:110px;">
            <i class="bi bi-arrow-left"></i> Retour
        </a>
    </div>

    <div class="mb-4 p-4" style="background:#fafbfc; border-radius:0.7em; border:1px solid #f0f0f0; font-family:'Segoe UI',Arial,sans-serif;">
        <div class="mb-3" style="font-size:1.1em; font-weight:500; color:#2a2a2a;">
            {{ document.title }}
        </div>
        <div class="mb-3" style="color:#444;">
            <span style="margin-right:1.2em;"><strong>Pages:</strong> {{ content.page_count }}</span>
            <span style="margin-right:1.2em;"><strong>Mots:</strong> {{ content.word_count }}</span>
            <span><strong>Caractères:</strong> {{ content.char_count }}</span>
        </div>

        {% if content.metadata %}
        <div class="mb-3">
            <button class="btn btn-sm btn-outline-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#metadata">
                <i class="bi bi-info-circle"></i> Métadonnées
            </button>
            <div class="collapse mt-2" id="metadata">
                <div style="background:#f6f6f6; border-radius:0.5em; padding:1em; font-size:0.97em; color:#333;">
                    <pre style="margin:0;">{{ content.metadata }}</pre>
                </div>
            </div>
        </div>
        {% endif %}

        <div style="background:#fff; border-radius:0.7em; padding:1.2em 1.5em; max-height:65vh; overflow-y:auto; border:1px solid #f0f0f0;">
            <pre style="white-space: pre-wrap; word-wrap: break-word; font-size:1.08em; color:#222; margin:0;">{{ content.extracted_text }}</pre>
        </div>
    </div>
</div>
{% endblock %}
